name: Daily Emotion Check-In Notifications

on:
  schedule:
    - cron: "30 3 * * *" # 9 AM IST
    - cron: "15 11 * * *" # 4:45 PM IST
  workflow_dispatch: {}

jobs:
  morning_notify:
    if: github.event.schedule == '30 3 * * *'
    runs-on: ubuntu-latest
    steps:
      - name: Send morning notification
        run: |
          curl -X POST "${{secrets.NOTIFY_URL}}" \
            -H "accept: application/json" \
            -H "Content-Type: application/json" \
            -d '{
              "title": "Good Morning!",
              "body": "How are you feeling today?",
              "data": {
                "type": "home_alert",
                "message": "Good morning! Would you like to share how you feel today?"
              }
            }'

  evening_notify:
    if: github.event.schedule == '15 11 * * *'
    runs-on: ubuntu-latest
    steps:
      - name: Send evening notification
        run: |
          curl -X POST "${{secrets.NOTIFY_URL}}" \
            -H "accept: application/json" \
            -H "Content-Type: application/json" \
            -d '{
              "title": "Good Evening!",
              "body": "Take a moment to reflect on your day.",
              "data": {
                "type": "home_alert",
                "message": "Evening check-in â€” How was your day?"
              }
            }'
